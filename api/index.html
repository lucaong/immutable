<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta id="repository-name" content="github.com/lucaong/immutable">
  <link href="css/style.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="js/doc.js"></script>
  <title>README - github.com/lucaong/immutable</title>
</head>
<body>

<div id="types-list">
  <div id="search-box">
    <input type="search" id="search-input" placeholder="Search...">
  </div>

  <ul>
    <li class="current"><a href="index.html">README</a></li>
  </ul>

  <ul>
  
  <li class="parent " data-id="github.com/lucaong/immutable/Immutable" data-name="immutable">
      <a href="Immutable.html">Immutable</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/lucaong/immutable/Immutable/Vector" data-name="immutable::vector(t)">
      <a href="Immutable/Vector.html">Vector</a>
      
        <ul>
  
  <li class=" " data-id="github.com/lucaong/immutable/Immutable/Vector/ItemIterator" data-name="immutable::vector::itemiterator(t)">
      <a href="Immutable/Vector/ItemIterator.html">ItemIterator</a>
      
    </li>
  
  <li class=" " data-id="github.com/lucaong/immutable/Immutable/Vector/Trie" data-name="immutable::vector::trie(t)">
      <a href="Immutable/Vector/Trie.html">Trie</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

</div>

<div id="main-content">
<p><a href="https://travis-ci.org/lucaong/immutable" target="_blank"><img src="https://travis-ci.org/lucaong/immutable.svg?branch=master" alt="Build Status"/></a></p>

<h1>Immutable</h1>

<p>Efficient, thread-safe immutable data structures for Crystal.</p>

<p>Whenever an <code><a href="Immutable.html">Immutable</a></code> data structure is "modified", the original remains
unchanged and a modified copy is returned. However, the copy is efficient due to
structural sharing. This makes <code><a href="Immutable.html">Immutable</a></code> data structures inherently
thread-safe, garbage collector friendly and performant.</p>

<p>At the moment, <code><a href="Immutable.html">Immutable</a></code> implements the following persistent data structures:</p>

<ul><li><code>Vector</code>: array-like ordered, integer-indexed collection implementing</li></ul>

<p>efficient appends, updates and lookups</p>

<p>TODO:</p>

<ul><li><code>Map</code>: hash-like key-value collection</li><li><code>Set</code>: unordered collection without duplicates</li></ul>

<h2>Installation</h2>

<p>Add this to your application's <code>shard.yml</code>:</p>

<pre><code class='language-yaml'>dependencies:
  immutable:
    github: lucaong/immutable</code></pre>

<h2>Usage</h2>

<p>For a list of all classes and methods refer to the <a href="http://lucaong.github.io/immutable/api/" target="_blank">API documentation</a></p>

<pre><code class='language-crystal'><span class="k">require</span> <span class="s">&quot;immutable&quot;</span>

vector <span class="o">=</span> <span class="t">Immutable</span><span class="t">::</span><span class="t">Vector</span>.<span class="k">new</span>([<span class="n">1</span>, <span class="n">2</span>, <span class="n">3</span>, <span class="n">4</span>, <span class="n">5</span>]) <span class="c"># =&gt; Vector [1, 2, 3, 4, 5]</span>
other  <span class="o">=</span> vector.set(<span class="n">2</span>, <span class="n">0</span>).push(<span class="n">42</span>)              <span class="c"># =&gt; Vector [1, 2, 0, 4, 5, 42]</span>
other[<span class="n">2</span>]                                        <span class="c"># =&gt; 0</span>

<span class="c"># The original vector is unchanged</span>
vector                                          <span class="c"># =&gt; Vector [1, 2, 3, 4, 5]</span></code></pre>

<h2>Implementation</h2>

<p><code>Vector</code> is implemented as a bit-partitioned vector trie with a block size of 32
bits, that guarantees O(log32) lookups and updates, which is effectively
constant time for practical purposes. Due to tail optimization, appends are O(1)
31 times out of 32, and O(log32) 1/32 of the times.</p>

<h2>Contributing</h2>

<ol><li>Fork it ( https://github.com/lucaong/immutable/fork )</li><li>Create your feature branch (git checkout -b my-new-feature)</li><li>Commit your changes (git commit -am 'Add some feature')</li><li>Push to the branch (git push origin my-new-feature)</li><li>Create a new Pull Request</li></ol>

<h2>Contributors</h2>

<ul><li><a href="https://github.com/lucaong" target="_blank">lucaong</a> Luca Ongaro - creator, maintainer</li></ul>

<h2>Acknowledgement</h2>

<p>Although not a port, this project takes inspiration from similar libraries and
persistent data structure implementations like:</p>

<ul><li><a href="http://clojure.org/reference/data_structures" target="_blank">Clojure persistent collections</a></li><li><a href="https://github.com/hamstergem/hamster" target="_blank">The Hamster gem for Ruby</a></li></ul>
</div>
</body>
</html>
